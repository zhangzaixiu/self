<?phpnamespace app\admin\controller;use app\admin\model\BannerModel;use think\Db;use think\Request;class BannerController extends  BaseController{    /**     * 列表页     * @return \think\response\Json|\think\response\View     */    public function index(){        $this->view->engine->layout(true);        if(\think\facade\Request::isAjax()){            $search = filter_array(input('','','trim'));            $data = BannerModel::getList($search);            return $data;        }        return view();    }    public function create(){        if(Request::instance()->isPost()){            try {                Db::startTrans();                $data = input('post.','','trim');                $valiRes = $this->validate($data, 'Banner');                if ($valiRes !== true) {                    throw new \think\Exception($valiRes);                }                $result = saveData('banner', $data);                if ($result['code'] == 0) {                    throw new \think\Exception('banner保存失败' . $result['msg']);                }                $result['msg'] = 'banner保存成功';                $result['success'] = true;                Db::commit();                return json($result);            } catch (\Exception $e) {                Db::rollback();                c_Log($e);                return json(['success' => false, 'msg' => $e->getMessage(), 'data' => []]);            }        }    }    // 删除    public function delete()    {        try {            $id = input('id');//            var_dump($id);die;            if(empty($id)){                throw new \think\Exception('错误请求');            }            $result = BannerModel::where(['id'=>$id])->delete();            if(!$result){                throw new \think\Exception('删除角色失败');            }            return json(['success' => 1, 'msg' => '删除成功']);        } catch (\Exception $e) {            return json(['success' => 0, 'msg' => $e->getMessage()]);        }    }}