<?phpnamespace app\admin\model;use think\Exception;use think\Model;class UserModel extends Model{    public function getStatusAliasAttr($value,$data)    {        $status = [1=>'正常',2=>'冻结'];        return $status[$data['status']];    }    /**     * 获取下拉列表需要的用户信息     * @return array     */    public static function getSelectArray(){        try {            $user = self::field(['id','name'])->order(['id'=>'desc'])->select();            $name_list = [];            foreach ($user as $k => $v){                $name_list[$v['id']] = $v['name'];            }            return $name_list;        }catch (Exception $e){            //记录错误日志//            var_dump($e->getMessage());            return [];        }    }    public function userRole()    {        return $this->hasOne(UserRoleModel::class,'id','role_id');    }//    /**//     * 根据权限筛选用户//     * @param string $url//     * @param array $param//     * @return array//     *///    public static function getUserByRoles($url = '',$param = []){//        if(empty($url)){//            return self::getSelectArray();//        }////        $menu = \app\common\model\Menu::getMenuByUrl($url,$param);//        if(empty($menu)){//            return [];//        }////        if(!$menu['ismenu']){//            return self::getSelectArray();//        }////        $join = [//            ['user_role b', 'a.roleId=b.id and b.isDelete = 0', 'left'],//        ];////        $user_list = getDataList('user', [], 'a.id,a.name,a.roleId,b.menuIds', "a.id desc",$join);//        if($user_list['code'] == 0|| empty($user_list['data'])){//            return [];//        }////        $list = [];//        foreach($user_list['data'] as $k=>$v){//            if($v['roleId'] == 1){//                $list[$v['id']] = $v['name']; continue;//            }//            $menu_arr=explode(',',$v['menuIds']);//            if(in_array($menu['id'],$menu_arr)){//                $list[$v['id']] = $v['name']; continue;//            }//        }////        return $list;//    }}